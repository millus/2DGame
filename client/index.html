<canvas id="ctx" width="500" height="500" style="border:1px solid #000000;"></canvas>

<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
<script>
  var ctx = document.getElementById('ctx').getContext("2d");
  ctx.font = '30px Arial';

  var numberOfFrames = 4;
  var numberOfRows = 4;
  var imageSizeX = 112;
  var imageSizeY = 140; 
  var HEIGHT = 500;
  var WIDTH = 500;

  var socket = io();

  socket.on('newPosition',function(data){
    ctx.clearRect(0,0,HEIGHT,WIDTH);
    for(var i=0; i < data.length; i++){
      var pic = new Image();
      pic.src = data[i].pic;
      ctx.fillText(data[i].number,data[i].x,data[i].y);
      ctx.drawImage(
        pic,
        data[i].frameIndex * pic.width / numberOfFrames, 
        data[i].direction, 
        pic.width / numberOfFrames, 
        pic.height / numberOfRows,
        data[i].x, 
        data[i].y, 
        imageSizeX, 
        imageSizeY
        );
    }
  });

  document.onkeydown = function (event) {
    if(event.keyCode === 68){//d
      socket.emit('keyPress',{inputId:'right', state:true});
    }else if(event.keyCode === 83){ //s
      socket.emit('keyPress',{inputId:'down', state:true});
    }else if(event.keyCode === 65){ //a
      socket.emit('keyPress',{inputId:'left', state:true});
    }else if(event.keyCode === 87){ //w
      socket.emit('keyPress',{inputId:'up', state:true});
    }
  }

  document.onkeyup = function (event) {
    if(event.keyCode === 68){ //d
      socket.emit('keyPress',{inputId:'right', state:false});
    }else if(event.keyCode === 83){ //s
      socket.emit('keyPress',{inputId:'down', state:false});
    }else if(event.keyCode === 65){ //a
      socket.emit('keyPress',{inputId:'left', state:false});
    }else if(event.keyCode === 87){ //w
      socket.emit('keyPress',{inputId:'up', state:false});
    }
  }

  function pickPlayer (color){
    var pic = "";
    if(color === "pink"){
      pic = "client/img/sprites.png";
    }else if(color === "blue"){
      pic = "client/img/spritesblue.png";
    }else {
      console.log("Unknown color");
    }
    socket.emit('newColor',{pic:pic});
  }
</script>

<button onclick="pickPlayer('pink')">Pink</button>
<button onclick="pickPlayer('blue')">Blue</button>
